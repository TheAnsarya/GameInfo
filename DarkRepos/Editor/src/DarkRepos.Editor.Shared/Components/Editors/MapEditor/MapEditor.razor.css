.map-editor {
	display: flex;
	flex-direction: column;
	height: 100%;
	background: var(--bg-primary, #1e1e1e);
	color: var(--text-primary, #d4d4d4);
	font-family: 'Segoe UI', system-ui, sans-serif;
	font-size: 13px;
}

.editor-toolbar {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	padding: 8px 12px;
	background: var(--bg-secondary, #252526);
	border-bottom: 1px solid var(--border-color, #3c3c3c);
}

.toolbar-group {
	display: flex;
	align-items: center;
	gap: 6px;
}

.toolbar-group label {
	color: var(--text-secondary, #9d9d9d);
	white-space: nowrap;
}

.toolbar-group select,
.toolbar-group input {
	background: var(--input-bg, #3c3c3c);
	color: var(--text-primary, #d4d4d4);
	border: 1px solid var(--border-color, #555);
	border-radius: 3px;
	padding: 4px 8px;
	font-size: 12px;
}

.hex-input {
	width: 80px;
	font-family: 'Consolas', 'Monaco', monospace;
}

.number-input {
	width: 60px;
}

.btn-primary,
.btn-secondary {
	padding: 5px 12px;
	border: none;
	border-radius: 3px;
	cursor: pointer;
	font-size: 12px;
	transition: background 0.2s;
}

.btn-primary {
	background: var(--accent-color, #0e639c);
	color: white;
}

.btn-primary:hover:not(:disabled) {
	background: var(--accent-hover, #1177bb);
}

.btn-secondary {
	background: var(--bg-tertiary, #505050);
	color: var(--text-primary, #d4d4d4);
}

.btn-secondary:hover:not(:disabled) {
	background: var(--bg-quaternary, #606060);
}

.btn-primary:disabled,
.btn-secondary:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.editor-content {
	display: flex;
	flex: 1;
	overflow: hidden;
}

/* Tileset Panel */
.tileset-panel {
	width: 180px;
	display: flex;
	flex-direction: column;
	border-right: 1px solid var(--border-color, #3c3c3c);
	background: var(--bg-secondary, #252526);
}

.panel-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 12px;
	background: var(--bg-tertiary, #2d2d2d);
	border-bottom: 1px solid var(--border-color, #3c3c3c);
}

.panel-header h3 {
	margin: 0;
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.tile-count,
.map-size {
	font-size: 11px;
	color: var(--text-secondary, #9d9d9d);
}

.modified-badge {
	background: var(--warning-color, #856404);
	color: white;
	padding: 2px 6px;
	border-radius: 3px;
	font-size: 10px;
	margin-left: 8px;
}

.tileset-grid {
	flex: 1;
	display: grid;
	grid-template-columns: repeat(8, 1fr);
	gap: 1px;
	padding: 4px;
	overflow-y: auto;
	background: var(--bg-primary, #1e1e1e);
}

.tileset-tile {
	aspect-ratio: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--bg-tertiary, #2d2d2d);
	border: 1px solid transparent;
	cursor: pointer;
	transition: border-color 0.15s;
}

.tileset-tile:hover {
	border-color: var(--accent-color, #0e639c);
}

.tileset-tile.selected {
	border-color: var(--accent-bright, #1177bb);
	box-shadow: 0 0 0 1px var(--accent-bright, #1177bb);
}

.tileset-tile img {
	width: 100%;
	height: 100%;
	image-rendering: pixelated;
}

.tileset-tile .tile-index {
	font-family: 'Consolas', monospace;
	font-size: 9px;
	color: var(--text-secondary, #9d9d9d);
}

.tile-info {
	padding: 8px;
	border-top: 1px solid var(--border-color, #3c3c3c);
	background: var(--bg-tertiary, #2d2d2d);
}

.info-row {
	display: flex;
	justify-content: space-between;
	padding: 2px 0;
}

.info-row .label {
	color: var(--text-secondary, #9d9d9d);
}

.info-row .value {
	font-family: 'Consolas', monospace;
}

/* Map Panel */
.map-panel {
	flex: 1;
	display: flex;
	flex-direction: column;
	min-width: 0;
}

.map-tools {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 6px 12px;
	background: var(--bg-tertiary, #2d2d2d);
	border-bottom: 1px solid var(--border-color, #3c3c3c);
}

.tool-btn {
	width: 28px;
	height: 28px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: transparent;
	border: 1px solid transparent;
	border-radius: 3px;
	color: var(--text-primary, #d4d4d4);
	cursor: pointer;
	transition: all 0.15s;
}

.tool-btn:hover {
	background: var(--bg-quaternary, #3c3c3c);
}

.tool-btn.active {
	background: var(--accent-color, #0e639c);
	border-color: var(--accent-bright, #1177bb);
}

.tool-btn:disabled {
	opacity: 0.4;
	cursor: not-allowed;
}

.tool-btn .icon {
	font-size: 14px;
}

.tool-separator {
	width: 1px;
	height: 20px;
	background: var(--border-color, #3c3c3c);
	margin: 0 4px;
}

.map-viewport {
	flex: 1;
	overflow: auto;
	position: relative;
	background: #0a0a0a;
	background-image: 
		linear-gradient(45deg, #1a1a1a 25%, transparent 25%),
		linear-gradient(-45deg, #1a1a1a 25%, transparent 25%),
		linear-gradient(45deg, transparent 75%, #1a1a1a 75%),
		linear-gradient(-45deg, transparent 75%, #1a1a1a 75%);
	background-size: 16px 16px;
	background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
}

.map-image {
	transform-origin: top left;
}

.map-grid-overlay {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-image: 
		linear-gradient(to right, rgba(255,255,255,0.1) 1px, transparent 1px),
		linear-gradient(to bottom, rgba(255,255,255,0.1) 1px, transparent 1px);
	background-size: 8px 8px;
	pointer-events: none;
	transform-origin: top left;
}

.selection-overlay {
	position: absolute;
	border: 2px dashed var(--accent-bright, #1177bb);
	background: rgba(14, 99, 156, 0.2);
	pointer-events: none;
}

.hover-tile {
	position: absolute;
	border: 1px solid var(--accent-color, #0e639c);
	background: rgba(14, 99, 156, 0.3);
	pointer-events: none;
}

.map-placeholder {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: var(--text-secondary, #9d9d9d);
}

.map-placeholder .hint {
	font-size: 12px;
	opacity: 0.7;
}

.map-info {
	padding: 4px 12px;
	background: var(--bg-tertiary, #2d2d2d);
	border-top: 1px solid var(--border-color, #3c3c3c);
	font-family: 'Consolas', monospace;
	font-size: 11px;
	color: var(--text-secondary, #9d9d9d);
}

.map-info span {
	margin-right: 8px;
}

/* Properties Panel */
.properties-panel {
	width: 240px;
	display: flex;
	flex-direction: column;
	border-left: 1px solid var(--border-color, #3c3c3c);
	background: var(--bg-secondary, #252526);
	overflow-y: auto;
}

.property-group {
	padding: 12px;
	border-bottom: 1px solid var(--border-color, #3c3c3c);
}

.property-group h4 {
	margin: 0 0 8px 0;
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-secondary, #9d9d9d);
}

.property-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 4px 0;
}

.property-row label {
	color: var(--text-secondary, #9d9d9d);
}

.property-row input[type="number"] {
	width: 60px;
	background: var(--input-bg, #3c3c3c);
	color: var(--text-primary, #d4d4d4);
	border: 1px solid var(--border-color, #555);
	border-radius: 3px;
	padding: 3px 6px;
	font-size: 12px;
}

.property-row input[type="checkbox"] {
	width: 16px;
	height: 16px;
	accent-color: var(--accent-color, #0e639c);
}

/* Palette Editor */
.palette-editor {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.palette-row {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 4px;
	border-radius: 3px;
	cursor: pointer;
	transition: background 0.15s;
}

.palette-row:hover {
	background: var(--bg-tertiary, #2d2d2d);
}

.palette-row.selected {
	background: var(--accent-color, #0e639c);
}

.palette-label {
	font-family: 'Consolas', monospace;
	font-size: 11px;
	color: var(--text-secondary, #9d9d9d);
	width: 24px;
}

.palette-row.selected .palette-label {
	color: white;
}

.palette-colors {
	display: flex;
	gap: 2px;
}

.color-swatch {
	width: 12px;
	height: 12px;
	border: 1px solid rgba(255,255,255,0.2);
	border-radius: 2px;
}

/* Validation */
.validation-result {
	margin-top: 8px;
	padding: 8px;
	border-radius: 4px;
}

.validation-result.valid {
	background: rgba(40, 167, 69, 0.2);
	border: 1px solid rgba(40, 167, 69, 0.4);
}

.validation-result.invalid {
	background: rgba(220, 53, 69, 0.2);
	border: 1px solid rgba(220, 53, 69, 0.4);
}

.validation-result .status {
	display: block;
	font-weight: 600;
	margin-bottom: 4px;
}

.validation-result.valid .status {
	color: #28a745;
}

.validation-result.invalid .status {
	color: #dc3545;
}

.validation-result .detail {
	font-size: 11px;
	color: var(--text-secondary, #9d9d9d);
}

.error-list {
	margin: 4px 0 0 0;
	padding-left: 16px;
	font-size: 11px;
	color: var(--text-secondary, #9d9d9d);
}

.error-list li {
	margin: 2px 0;
}

/* Status Bar */
.status-bar {
	display: flex;
	gap: 16px;
	padding: 4px 12px;
	background: var(--bg-tertiary, #2d2d2d);
	border-top: 1px solid var(--border-color, #3c3c3c);
	font-size: 11px;
}

.status-item {
	color: var(--text-secondary, #9d9d9d);
}

.status-item:first-child {
	flex: 1;
}

/* Scrollbar styling */
.tileset-grid::-webkit-scrollbar,
.map-viewport::-webkit-scrollbar,
.properties-panel::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

.tileset-grid::-webkit-scrollbar-track,
.map-viewport::-webkit-scrollbar-track,
.properties-panel::-webkit-scrollbar-track {
	background: var(--bg-primary, #1e1e1e);
}

.tileset-grid::-webkit-scrollbar-thumb,
.map-viewport::-webkit-scrollbar-thumb,
.properties-panel::-webkit-scrollbar-thumb {
	background: var(--bg-quaternary, #424242);
	border-radius: 4px;
}

.tileset-grid::-webkit-scrollbar-thumb:hover,
.map-viewport::-webkit-scrollbar-thumb:hover,
.properties-panel::-webkit-scrollbar-thumb:hover {
	background: var(--bg-highlight, #555555);
}
