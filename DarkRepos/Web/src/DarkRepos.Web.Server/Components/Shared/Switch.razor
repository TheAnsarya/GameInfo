@namespace DarkRepos.Web.Components.Shared

<label class="switch @GetSizeClass() @(Disabled ? "switch--disabled" : "") @CssClass">
	<input type="checkbox" class="switch-input" checked="@Checked" disabled="@Disabled" @onchange="HandleChange"
		role="switch" aria-checked="@(Checked ? "true" : "false")" aria-label="@(Label ?? "Toggle")" />
	<span class="switch-track">
		<span class="switch-thumb"></span>
	</span>
	@if (!string.IsNullOrEmpty(Label))
	{
		<span class="switch-label">@Label</span>
	}
</label>

@code {
	/// <summary>
	/// Whether the switch is checked.
	/// </summary>
	[Parameter]
	public bool Checked { get; set; }

	/// <summary>
	/// Callback when checked state changes.
	/// </summary>
	[Parameter]
	public EventCallback<bool> CheckedChanged { get; set; }

	/// <summary>
	/// Whether the switch is disabled.
	/// </summary>
	[Parameter]
	public bool Disabled { get; set; }

	/// <summary>
	/// Optional label text.
	/// </summary>
	[Parameter]
	public string? Label { get; set; }

	/// <summary>
	/// Switch size.
	/// </summary>
	[Parameter]
	public SwitchSize Size { get; set; } = SwitchSize.Medium;

	/// <summary>
	/// Additional CSS classes.
	/// </summary>
	[Parameter]
	public string? CssClass { get; set; }

	private async Task HandleChange(ChangeEventArgs e)
	{
		if (Disabled) return;

		var newValue = (bool)(e.Value ?? false);
		Checked = newValue;
		await CheckedChanged.InvokeAsync(newValue);
	}

	private string GetSizeClass() => Size switch
	{
		SwitchSize.Small => "switch--small",
		SwitchSize.Large => "switch--large",
		_ => ""
	};

	public enum SwitchSize
	{
		Small,
		Medium,
		Large
	}
}