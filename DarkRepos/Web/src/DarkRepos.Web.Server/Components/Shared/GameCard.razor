@using DarkRepos.Core.Models

<article class="game-card" role="listitem">
	<div class="game-card-image">
		@if (!string.IsNullOrEmpty(Game.CoverImage))
		{
			<img src="@Game.CoverImage" alt="@Game.Title cover art" loading="lazy" />
		}
		else
		{
			<div class="placeholder-cover">
				<span>@GetPlatformIcon()</span>
			</div>
		}
	</div>
	<div class="game-card-content">
		<PlatformBadge Platform="@Game.Platform" />
		<h3 class="game-card-title">
			<a href="/games/@Game.Slug">@Game.Title</a>
		</h3>
		@if (ShowMeta && (!string.IsNullOrEmpty(Game.Developer) || Game.ReleaseYear.HasValue))
		{
			<p class="game-card-meta">
				@if (!string.IsNullOrEmpty(Game.Developer))
				{
					<span>@Game.Developer</span>
				}
				@if (Game.ReleaseYear.HasValue)
				{
					<span>@Game.ReleaseYear</span>
				}
			</p>
		}
		@if (ShowWikiStatus)
		{
			<WikiResourceStatus Wiki="@Game.Wiki" Compact="true" />
		}
		@if (!ShowMeta && !string.IsNullOrEmpty(Game.Publisher))
		{
			<p class="game-card-publisher">@Game.Publisher</p>
		}
	</div>
</article>

@code {
	[Parameter, EditorRequired]
	public Game Game { get; set; } = default!;

	[Parameter]
	public bool ShowWikiStatus { get; set; } = true;

	[Parameter]
	public bool ShowMeta { get; set; } = false;

	private string GetPlatformIcon() => Game.Platform switch
	{
		Platform.NES => "ðŸŽ®",
		Platform.SNES => "ðŸŽ®",
		Platform.GB => "ðŸ“±",
		Platform.GBC => "ðŸ“±",
		Platform.GBA => "ðŸ“±",
		Platform.Genesis => "ðŸŽ®",
		Platform.N64 => "ðŸŽ®",
		Platform.PlayStation => "ðŸŽ®",
		Platform.MasterSystem => "ðŸŽ®",
		_ => "ðŸŽ®"
	};
}