{{Back|Mappy-Land (NES)}}
{{Rommap}}
{{Cleanup}}

= Mappy-Land (NES) - ROM Map =

This page documents the ROM structure for '''Mappy-Land''' (NES).

== Overview ==

Mappy-Land is an action platformer by Namco released in 1986 (Japan) / 1989 (US). It uses mapper MMC1 (iNES mapper 1) with 128 KB PRG-ROM and 128 KB CHR-ROM.

==Header Information (iNES)==

{| class="wikitable"
! Offset !! Size !! Description
|-
| $0000 || 4 bytes || "NES" + $1a
|-
| $0004 || 1 byte || PRG-ROM size (8 = 128 KB)
|-
| $0005 || 1 byte || CHR-ROM size (8 = 128 KB)
|-
| $0006 || 1 byte || Flags 6 (mapper low, mirroring)
|-
| $0007 || 1 byte || Flags 7 (mapper high)
|-
| $0008-$000f || 8 bytes || Reserved (zero-filled)
|}

==Bank Structure==

PRG-ROM is 128 KB divided into 8 banks of 16 KB each.

{| class="wikitable sortable"
! Bank !! Offset !! Size !! Description
|-
| 0 || $00010 || $4000 || Level data (worlds 1-2)
|-
| 1 || $04010 || $4000 || Level data (worlds 3-4)
|-
| 2 || $08010 || $4000 || Level data (worlds 5-6)
|-
| 3 || $0c010 || $4000 || Level data (worlds 7-8)
|-
| 4 || $10010 || $4000 || Enemy AI and behaviors
|-
| 5 || $14010 || $4000 || Item data and physics
|-
| 6 || $18010 || $4000 || Music and sound data
|-
| 7 || $1c010 || $4000 || Main engine code (fixed bank)
|}

==Main Program Code (Bank 7)==

===Reset Vectors===

{| class="wikitable"
! Address !! Description
|-
| $fffa || NMI vector
|-
| $fffc || Reset vector
|-
| $fffe || IRQ vector
|}

===Core Routines===

{| class="wikitable"
! Address !! Description
|-
| $c000 || Program entry point
|-
| $c100 || Main game loop
|-
| $c200 || Title screen handler
|-
| $c300 || Game state machine
|-
| $c400 || Input handling
|-
| $c500 || Collision detection
|-
| $c600 || Sprite management
|-
| $c700 || Score/life handling
|}

==Level Data Format==

Each level (stage) has the following structure:

===Level Header===

{| class="wikitable"
! Offset !! Size !! Description
|-
| $00 || 1 byte || Level width (in screens)
|-
| $01 || 1 byte || Level height
|-
| $02 || 1 byte || Starting X position
|-
| $03 || 1 byte || Starting Y position
|-
| $04 || 1 byte || Time limit (in game ticks)
|-
| $05 || 1 byte || Tileset ID
|-
| $06 || 1 byte || Music ID
|-
| $07 || 1 byte || Palette ID
|-
| $08 || 2 bytes || Tile data pointer (low word)
|-
| $0a || 2 bytes || Object placement pointer
|-
| $0c || 2 bytes || Enemy placement pointer
|-
| $0e || 2 bytes || Item placement pointer
|}

===Level Tile Data===

Tiles are stored in RLE compressed format:
* High bit clear: Literal tile (repeat 1 time)
* High bit set: RLE encoded (low 7 bits = count, next byte = tile)

===World Structure===

{| class="wikitable"
! World !! Theme !! Levels
|-
| 1 || Forest || 4 stages
|-
| 2 || Desert || 4 stages
|-
| 3 || Ice || 4 stages
|-
| 4 || Jungle || 4 stages
|-
| 5 || Mountain || 4 stages
|-
| 6 || Ocean || 4 stages
|-
| 7 || Castle || 4 stages
|-
| 8 || Final || 4 stages
|}

==Character Data==

===Mappy Sprite Data===

{| class="wikitable"
! Address !! Description
|-
| $8000 || Mappy standing frames
|-
| $8040 || Mappy walking frames
|-
| $8080 || Mappy jumping frames
|-
| $80c0 || Mappy falling frames
|-
| $8100 || Mappy on trampoline
|-
| $8140 || Mappy hurt frames
|-
| $8180 || Mappy death frames
|}

===Animation Frame Format===

{| class="wikitable"
! Offset !! Size !! Description
|-
| $00 || 1 byte || Number of sprites
|-
| $01 || 1 byte || Animation delay
|-
| $02 || n*4 bytes || Sprite entries (Y, tile, attr, X)
|}

==Enemy Data==

===Enemy Type Table===

{| class="wikitable"
! ID !! Enemy !! Behavior
|-
| $00 || Nyamco (cat) || Walks, chases Mappy
|-
| $01 || Meowky || Fast cat, patrols
|-
| $02 || Goro || Boss cat
|-
| $03 || Mewkies || Small cats, group movement
|-
| $04 || Ball enemy || Bounces around
|-
| $05 || Spike enemy || Stationary hazard
|-
| $06 || Flying enemy || Aerial movement
|-
| $07 || Rolling enemy || Ground roller
|}

===Enemy Data Structure===

{| class="wikitable"
! Offset !! Size !! Description
|-
| $00 || 1 byte || Enemy type ID
|-
| $01 || 1 byte || Starting X position
|-
| $02 || 1 byte || Starting Y position
|-
| $03 || 1 byte || Movement pattern
|-
| $04 || 1 byte || Speed
|-
| $05 || 1 byte || AI behavior flags
|}

==Item Data==

===Collectible Items===

{| class="wikitable"
! ID !! Item !! Points
|-
| $00 || Baseball || 100
|-
| $01 || Fish || 200
|-
| $02 || Ring || 300
|-
| $03 || Trophy || 500
|-
| $04 || Cheese || 1000
|-
| $05 || Present box || 2000
|-
| $06 || Special item || Varies
|-
| $07 || Extra life || 1UP
|}

===Item Placement Entry===

{| class="wikitable"
! Offset !! Size !! Description
|-
| $00 || 1 byte || Item type ID
|-
| $01 || 1 byte || X position
|-
| $02 || 1 byte || Y position
|-
| $03 || 1 byte || Respawn flag
|}

==Trampoline Data==

Trampolines are a key mechanic in Mappy-Land.

{| class="wikitable"
! Bounce !! Height !! Sprite Change
|-
| 1st || Normal || Yellow
|-
| 2nd || Higher || Orange
|-
| 3rd || Highest || Red
|-
| 4th || Break || --
|}

==Music Data==

===Music Track Table===

{| class="wikitable"
! ID !! Track
|-
| $00 || Title screen
|-
| $01 || World 1 BGM
|-
| $02 || World 2 BGM
|-
| $03 || World 3 BGM
|-
| $04 || World 4 BGM
|-
| $05 || World 5 BGM
|-
| $06 || World 6 BGM
|-
| $07 || World 7 BGM
|-
| $08 || World 8 BGM
|-
| $09 || Boss music
|-
| $0a || Stage clear
|-
| $0b || Game over
|-
| $0c || Ending
|}

==CHR-ROM Layout==

{| class="wikitable"
! Bank !! Offset !! Description
|-
| 0 || $00000 || Mappy sprites
|-
| 1 || $02000 || Enemy sprites
|-
| 2 || $04000 || Item sprites
|-
| 3 || $06000 || World 1-2 tiles
|-
| 4 || $08000 || World 3-4 tiles
|-
| 5 || $0a000 || World 5-6 tiles
|-
| 6 || $0c000 || World 7-8 tiles
|-
| 7 || $0e000 || UI and font tiles
|}

==Scoring System==

{| class="wikitable"
! Action !! Points
|-
| Collect item || Varies by item
|-
| Defeat enemy with door || 500
|-
| Clear stage || Time bonus
|-
| Extra life || Every 20,000 points
|}

==Game State Values==

{| class="wikitable"
! Value !! State
|-
| $00 || Title screen
|-
| $01 || World map
|-
| $02 || Stage intro
|-
| $03 || Playing stage
|-
| $04 || Stage clear
|-
| $05 || Game over
|-
| $06 || Ending sequence
|-
| $07 || High score entry
|}

==Notes==

* Uses MMC1 mapper for bank switching
* 8 worlds with 4 stages each = 32 total stages
* Supports 2-player alternating mode
* See [[Mappy-Land (NES):TBL|TBL]] for text encoding

[[Category:Mappy-Land (NES)|ROM map]]
