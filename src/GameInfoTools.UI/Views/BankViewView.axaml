<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:vm="using:GameInfoTools.UI.ViewModels"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
			 x:Class="GameInfoTools.UI.Views.BankViewView"
			 x:DataType="vm:BankViewViewModel">

	<Design.DataContext>
		<vm:BankViewViewModel/>
	</Design.DataContext>

	<Grid RowDefinitions="Auto,*,Auto">
		<!-- Toolbar -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="16,16,16,8">
			<TextBlock Text="Bank Size:" VerticalAlignment="Center"/>
			<NumericUpDown Value="{Binding BankSize}" Minimum="1024" Maximum="65536" Width="100" Increment="1024"/>
			<Separator/>
			<Button Content="Refresh" Command="{Binding SetBankSizeCommand}" ToolTip.Tip="Apply bank size and refresh"/>
		</StackPanel>

		<!-- Main Content -->
		<Grid Grid.Row="1" ColumnDefinitions="*,300" Margin="16,8">
			<!-- Bank List -->
			<Border Grid.Column="0" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
					CornerRadius="4" Padding="8" Margin="0,0,8,0">
				<DockPanel>
					<TextBlock DockPanel.Dock="Top" Text="ROM Banks" FontWeight="SemiBold" Margin="0,0,0,8"/>
					<DataGrid ItemsSource="{Binding Banks}" SelectedIndex="{Binding SelectedBankIndex}"
							  AutoGenerateColumns="False" IsReadOnly="True"
							  GridLinesVisibility="Horizontal">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Bank" Binding="{Binding Name}" Width="80"/>
							<DataGridTextColumn Header="Offset" Binding="{Binding FileOffset, StringFormat=0x{0:X6}}" Width="80"/>
							<DataGridTextColumn Header="Size" Binding="{Binding Size, StringFormat={}{0:N0}}" Width="80"/>
							<DataGridTextColumn Header="CPU Address" Binding="{Binding CpuAddress}" Width="120"/>
							<DataGridTextColumn Header="Content" Binding="{Binding ContentType}" Width="*"/>
						</DataGrid.Columns>
					</DataGrid>
				</DockPanel>
			</Border>

			<!-- Right Panel - Bank Details -->
			<Border Grid.Column="1" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
					CornerRadius="4" Padding="16">
				<ScrollViewer>
					<StackPanel Spacing="16">
						<TextBlock Text="Bank Details" FontWeight="SemiBold" FontSize="16"/>

						<TextBlock Text="{Binding BankDetails}" FontFamily="Consolas" TextWrapping="Wrap"
								   IsVisible="{Binding SelectedBank, Converter={x:Static ObjectConverters.IsNotNull}}"/>

						<TextBlock Text="Select a bank to view details"
								   IsVisible="{Binding SelectedBank, Converter={x:Static ObjectConverters.IsNull}}"
								   Opacity="0.7"/>

						<Separator/>

						<TextBlock Text="CPU Address Mapping" FontWeight="SemiBold"/>
						<TextBlock Text="{Binding CpuAddressRange}" FontFamily="Consolas"
								   IsVisible="{Binding SelectedBank, Converter={x:Static ObjectConverters.IsNotNull}}"/>

						<Separator/>

						<TextBlock Text="Bank Statistics" FontWeight="SemiBold"/>
						<StackPanel Spacing="4">
							<TextBlock Text="{Binding Banks.Count, StringFormat=Total Banks: {0}}"/>
							<TextBlock Text="{Binding BankSize, StringFormat=Bank Size: {0:N0} bytes}"/>
						</StackPanel>

						<Separator/>

						<TextBlock Text="Legend" FontWeight="SemiBold"/>
						<StackPanel Spacing="4" Opacity="0.7">
							<TextBlock Text="• Code - Executable instructions"/>
							<TextBlock Text="• Data/Graphics - Non-code data"/>
							<TextBlock Text="• Text/Strings - ASCII-like data"/>
							<TextBlock Text="• Empty/Padding - Mostly 00/FF"/>
						</StackPanel>

						<Separator/>

						<TextBlock Text="{Binding StatusText}" Opacity="0.7" TextWrapping="Wrap"/>
					</StackPanel>
				</ScrollViewer>
			</Border>
		</Grid>

		<!-- Status Bar -->
		<Border Grid.Row="2" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" Padding="16,8">
			<TextBlock Text="{Binding StatusText}"/>
		</Border>
	</Grid>
</UserControl>
