{{DISPLAYTITLE:Soul Blazer - Audio}}
'''Soul Blazer''' features a complete SPC700 audio system with music composed by '''Yukihide Takekawa''' (タケカワユキヒデ).

==Overview==
The SNES SPC700 audio processor handles all music and sound effects. Soul Blazer's audio driver is located at '''$07A7F6''' (file offset $3E7F6) in the ROM.

===Audio Statistics===
{| class="wikitable"
! Property !! Value
|-
| Audio Driver Size || ~4KB
|-
| Music Tracks || 22
|-
| Sound Effects || 16
|-
| BRR Samples || 32
|-
| Total Audio Data || ~96KB (Bank $0F + samples)
|}

==SPC700 Audio Driver==

===Driver Location===
{| class="wikitable"
! Component !! File Offset !! Size !! Description
|-
| Driver Code || $078000 || 2,048 || SPC700 program code
|-
| DSP Setup || $078800 || 512 || DSP register initialization
|-
| Sample Directory || $078A00 || 256 || BRR sample pointers
|-
| Music Data || $078C00 || ~28KB || Sequence data for all tracks
|}

===Driver Features===
* 8-channel polyphonic playback
* Echo effect with configurable delay/feedback
* Pitch modulation and portamento
* ADSR envelope control per instrument
* Priority system for sound effects

==Music Tracks==

===Track List===
{| class="wikitable sortable"
! ID !! File Offset !! Name !! Length !! Context
|-
| $00 || $078C00 || Silence || 0:00 || Null track
|-
| $01 || $078C10 || Title Screen || 1:32 || Title menu
|-
| $02 || $078D40 || The Shrine || 0:48 || Master's shrines
|-
| $03 || $078E80 || Grass Valley || 2:15 || Act 1 Town
|-
| $04 || $079100 || Underground Castle || 2:45 || Act 1 Dungeon
|-
| $05 || $079450 || GreenWood Village || 2:28 || Act 2 Town
|-
| $06 || $079780 || GreenWood Forest || 2:52 || Act 2 Dungeon
|-
| $07 || $079B20 || St. Elles Beach || 2:18 || Act 3 Town
|-
| $08 || $079E40 || Seabed Palace || 3:05 || Act 3 Dungeon
|-
| $09 || $07A280 || Ghost Ship || 2:35 || Act 3 Ghost Ship area
|-
| $0A || $07A5C0 || Mountain Village || 2:22 || Act 4 Town
|-
| $0B || $07A8F0 || Mountain of Souls || 3:12 || Act 4 Dungeon
|-
| $0C || $07AD40 || Leo's Laboratory || 2:08 || Act 5 Town
|-
| $0D || $07B050 || Model Town || 2:42 || Act 5 Dungeon
|-
| $0E || $07B3A0 || Painting World || 2:55 || Act 5 Painting areas
|-
| $0F || $07B720 || Magridd Castle || 2:48 || Act 6 Town
|-
| $10 || $07BA80 || World of Evil || 3:28 || Act 6 Dungeon
|-
| $11 || $07BF00 || Boss Battle || 1:45 || Standard boss fights
|-
| $12 || $07C180 || Deathtoll Battle || 2:52 || Final boss theme
|-
| $13 || $07C500 || Victory Fanfare || 0:12 || Boss defeated
|-
| $14 || $07C580 || Soul Released || 0:08 || Soul lair cleared
|-
| $15 || $07C5E0 || Game Over || 0:18 || Death screen
|-
| $16 || $07C680 || Ending Theme || 3:45 || Credits sequence
|}

===Track Categories===
{| class="wikitable"
! Category !! Track IDs !! Count
|-
| Town Themes || $03, $05, $07, $0A, $0C, $0F || 6
|-
| Dungeon Themes || $04, $06, $08, $09, $0B, $0D, $0E, $10 || 8
|-
| Boss Themes || $11, $12 || 2
|-
| Jingles || $13, $14, $15 || 3
|-
| Special || $01, $02, $16 || 3
|}

==Sound Effects==

{| class="wikitable sortable"
! ID !! Name !! Context !! Priority
|-
| $00 || Menu Select || Menu navigation || Low
|-
| $01 || Menu Cancel || Cancel action || Low
|-
| $02 || Sword Slash || Normal attack || Medium
|-
| $03 || Sword Hit || Attack connects || Medium
|-
| $04 || Enemy Hit || Enemy takes damage || Medium
|-
| $05 || Enemy Death || Enemy destroyed || Medium
|-
| $06 || Player Hurt || Taking damage || High
|-
| $07 || Magic Cast || Using magic || Medium
|-
| $08 || Flame Ball || Fire magic sound || Medium
|-
| $09 || Spark Bomb || Bomb explosion || High
|-
| $0A || Tornado || Wind magic || Medium
|-
| $0B || Soul Release || Lair cleared || High
|-
| $0C || Item Pickup || Collecting item || Low
|-
| $0D || Level Up || Gaining level || High
|-
| $0E || Boss Intro || Boss appearance || High
|-
| $0F || Warp || Teleportation || Medium
|}

==BRR Samples==

Soul Blazer uses '''BRR''' (Bit Rate Reduction) format for all audio samples. Each sample is compressed at 4:1 ratio.

===Sample Directory===
{| class="wikitable sortable"
! ID !! Offset !! Size !! Description !! ADSR
|-
| $00 || $0F8000 || 576 || Strings (sustain) || 0xA0F0
|-
| $01 || $0F8240 || 432 || Flute || 0x80E8
|-
| $02 || $0F83F0 || 288 || Brass || 0xB0F0
|-
| $03 || $0F8510 || 864 || Piano || 0x90D8
|-
| $04 || $0F8870 || 720 || Organ || 0xA0E8
|-
| $05 || $0F8B40 || 576 || Choir || 0x80E0
|-
| $06 || $0F8D80 || 360 || Bell || 0x60C8
|-
| $07 || $0F8EE8 || 432 || Harp || 0x70D0
|-
| $08 || $0F9098 || 1,152 || Guitar || 0x90E0
|-
| $09 || $0F9518 || 288 || Bass || 0xB0F8
|-
| $0A || $0F9638 || 720 || Synth Lead || 0x80E8
|-
| $0B || $0F9908 || 576 || Synth Pad || 0xA0F0
|-
| $0C || $0F9B48 || 216 || Kick Drum || 0xF0FF
|-
| $0D || $0F9C20 || 144 || Snare Drum || 0xF0FF
|-
| $0E || $0F9CB0 || 144 || Hi-Hat Closed || 0xF0FF
|-
| $0F || $0F9D40 || 180 || Hi-Hat Open || 0xE0F0
|-
| $10 || $0F9DF4 || 288 || Tom || 0xF0FF
|-
| $11 || $0F9F14 || 144 || Cymbal || 0xD0E8
|-
| $12 || $0F9FA4 || 432 || Timpani || 0xB0F0
|-
| $13 || $0FA154 || 216 || Triangle || 0x60B0
|-
| $14 || $0FA22C || 576 || Sword SFX || 0xF0FF
|-
| $15 || $0FA46C || 360 || Hit SFX || 0xF0FF
|-
| $16 || $0FA5D4 || 432 || Magic SFX || 0xE0F8
|-
| $17 || $0FA784 || 288 || Explosion || 0xF0FF
|-
| $18 || $0FA8A4 || 360 || Whoosh || 0xD0E8
|-
| $19 || $0FAA0C || 216 || Pickup || 0xE0F0
|-
| $1A || $0FAAE4 || 576 || Fanfare || 0x90E0
|-
| $1B || $0FAD24 || 432 || Choir Hit || 0xA0E8
|-
| $1C || $0FAED4 || 288 || Alert || 0xE0F8
|-
| $1D || $0FAFF4 || 360 || Wind || 0x80D0
|-
| $1E || $0FB15C || 576 || Water || 0x70C8
|-
| $1F || $0FB39C || 288 || Ghost || 0x90E0
|}

===BRR Format===
Each BRR block is 9 bytes:
<pre>
Byte 0: Header
  Bits 7-6: Range (shift amount)
  Bits 5-4: Filter mode (0-3)
  Bit 1: Loop flag
  Bit 0: End flag

Bytes 1-8: Sample data (16 4-bit samples)
</pre>

==DSP Configuration==

===Echo Settings===
{| class="wikitable"
! Register !! Value !! Description
|-
| ESA ($6D) || $E0 || Echo buffer start ($E000 in SPC RAM)
|-
| EDL ($7D) || $04 || Echo delay (16ms)
|-
| EFB ($0D) || $30 || Echo feedback (48/128)
|-
| EVOL L ($2C) || $20 || Echo volume left
|-
| EVOL R ($3C) || $20 || Echo volume right
|-
| FLG ($6C) || $00 || Flags (echo enabled)
|}

===Master Volume===
{| class="wikitable"
! Register !! Value !! Description
|-
| MVOL L ($0C) || $7F || Master volume left (max)
|-
| MVOL R ($1C) || $7F || Master volume right (max)
|}

==Music Sequence Format==

Soul Blazer uses a custom sequence format for music data.

===Command Bytes===
{| class="wikitable"
! Byte !! Command !! Parameters !! Description
|-
| $00-$7F || Note || 1 byte length || Play note (pitch = byte value)
|-
| $80 || Rest || 1 byte length || Silence for duration
|-
| $81 || Tie || 1 byte length || Extend previous note
|-
| $82 || Set Instrument || 1 byte || Change to sample ID
|-
| $83 || Set Volume || 1 byte || Channel volume (0-127)
|-
| $84 || Set Pan || 1 byte || Stereo position (0-127)
|-
| $85 || Tempo || 1 byte || Set BPM
|-
| $86 || Transpose || 1 byte (signed) || Pitch shift in semitones
|-
| $87 || Detune || 1 byte (signed) || Fine pitch adjustment
|-
| $88 || Portamento || 1 byte rate || Pitch slide speed
|-
| $89 || Vibrato || 2 bytes (rate, depth) || Pitch oscillation
|-
| $8A || Echo On || 0 || Enable echo for channel
|-
| $8B || Echo Off || 0 || Disable echo for channel
|-
| $8C || Loop Start || 1 byte count || Begin loop section
|-
| $8D || Loop End || 0 || End loop, decrement counter
|-
| $8E || Call || 2 bytes address || Call subroutine
|-
| $8F || Return || 0 || Return from subroutine
|-
| $FF || Track End || 0 || End of track data
|}

===Duration Table===
Note/rest durations use a lookup table:
{| class="wikitable"
! Value !! Ticks !! Name
|-
| $00 || 192 || Whole note
|-
| $01 || 144 || Dotted half
|-
| $02 || 96 || Half note
|-
| $03 || 72 || Dotted quarter
|-
| $04 || 48 || Quarter note
|-
| $05 || 36 || Dotted eighth
|-
| $06 || 24 || Eighth note
|-
| $07 || 18 || Dotted sixteenth
|-
| $08 || 12 || Sixteenth note
|-
| $09 || 6 || Thirty-second note
|-
| $0A || 3 || Sixty-fourth note
|}

==Area Music Mapping==

{| class="wikitable"
! Area ID !! Area Name !! Town Track !! Dungeon Track
|-
| $00 || Grass Valley || $03 || $04
|-
| $01 || Underground Castle || — || $04
|-
| $02 || GreenWood || $05 || $06
|-
| $03 || Lost Marsh || — || $06
|-
| $04 || Water Shrine || — || $06
|-
| $05 || Fire Shrine || — || $06
|-
| $06 || Light Shrine || — || $06
|-
| $07 || St. Elles || $07 || $08
|-
| $08 || Seabed || — || $08
|-
| $09 || Ghost Ship || — || $09
|-
| $0A || Mountain Village || $0A || $0B
|-
| $0B || Mine || — || $0B
|-
| $0C || Laynole || — || $0B
|-
| $0D || Leo's Laboratory || $0C || $0D
|-
| $0E || Model Town 1 || — || $0D
|-
| $0F || Model Town 2 || — || $0D
|-
| $10 || Painting World || — || $0E
|-
| $11 || Magridd Castle || $0F || $10
|-
| $12 || World of Evil || — || $10
|-
| $13 || Deathtoll's Room || — || $12
|}

==RAM Addresses==

===Music Playback===
{| class="wikitable"
! Address !! Size !! Description
|-
| $7E1F00 || 1 || Current music track ID
|-
| $7E1F01 || 1 || Previous music track (for fade)
|-
| $7E1F02 || 1 || Music volume (0-127)
|-
| $7E1F03 || 1 || Fade target volume
|-
| $7E1F04 || 1 || Fade speed (frames per step)
|-
| $7E1F05 || 1 || Music paused flag
|}

===Sound Effect Playback===
{| class="wikitable"
! Address !! Size !! Description
|-
| $7E1F10 || 1 || SFX queue slot 0
|-
| $7E1F11 || 1 || SFX queue slot 1
|-
| $7E1F12 || 1 || SFX queue slot 2
|-
| $7E1F13 || 1 || SFX queue slot 3
|-
| $7E1F14 || 1 || SFX priority mask
|}

==Composer Credits==

'''Yukihide Takekawa''' (タケカワユキヒデ) composed the Soul Blazer soundtrack. He is also known for:
* Illusion of Gaia (SNES, 1993)
* Terranigma (SNES, 1995)
* Robotrek (SNES, 1994)

The Quintet "Heaven and Earth" trilogy shares similar musical themes and motifs across all three games.

==Tool Support==

===SPC Exporter===
The <code>spc_exporter.py</code> tool can extract all music tracks to playable SPC files:
<pre>
python spc_exporter.py                   # Export all tracks
python spc_exporter.py --track 0x03      # Export specific track
python spc_exporter.py --analyze         # Analyze audio data
</pre>

===Audio Player===
The <code>audio_player.py</code> tool provides a GUI for audio playback:
<pre>
python audio_player.py                   # Launch GUI
python audio_player.py --export-all DIR  # Export to WAV
</pre>

==See Also==
* [[Soul Blazer:ROM map|ROM Map]] - Audio data locations
* [[Soul Blazer:RAM map|RAM Map]] - Audio RAM variables
* [[Soul Blazer:Data structures|Data Structures]] - BRR format details
* [[Soul Blazer:Progression|Progression]] - Area music by act

[[Category:Soul Blazer]]
[[Category:SNES Audio]]
[[Category:Game Music]]
