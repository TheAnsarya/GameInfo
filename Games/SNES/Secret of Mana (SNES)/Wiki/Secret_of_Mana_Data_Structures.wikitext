{{DISPLAYTITLE:Secret of Mana/Data Structures}}
This page documents the data structures used in '''[[Secret of Mana]]''' (US version).

==Enemy Stats==

===Enemy Stats Table===
Located at ROM offset $101dfa. Each entry is 16 bytes.

{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 2 || HP (little-endian)
|-
| $02 || 2 || MP
|-
| $04 || 2 || Experience reward
|-
| $06 || 2 || Gold reward
|-
| $08 || 1 || Physical attack power
|-
| $09 || 1 || Physical defense
|-
| $0a || 1 || Magical attack
|-
| $0b || 1 || Magical defense
|-
| $0c || 1 || Agility/Evade
|-
| $0d || 1 || Hit rate
|-
| $0e || 1 || Enemy type/flags
|-
| $0f || 1 || AI type index
|}

===Enemy ID List===
{| class="wikitable"
|-
! ID !! Name !! HP !! EXP !! Gold
|-
| 00 || Rabite || 20 || 1 || 3
|-
| 01 || Buzz Bee || 30 || 2 || 6
|-
| 02 || Chobin Hood || 55 || 3 || 12
|-
| 03 || Lullabud || 40 || 3 || 10
|-
| 04 || Mushboom || 35 || 4 || 10
|-
| 05 || Goblin || 50 || 5 || 15
|-
| ... || ... || ... || ... || ...
|}

==Item Data==

===Item Structure===
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 1 || Item type (consumable, equip, etc.)
|-
| $01 || 1 || Subtype
|-
| $02 || 2 || Price
|-
| $04 || 1 || Effect value
|-
| $05 || 1 || Target type
|}

===Item Type Values===
{| class="wikitable"
|-
! Value !! Type
|-
| $00 || Consumable (usable)
|-
| $01 || Weapon
|-
| $02 || Head armor
|-
| $03 || Body armor
|-
| $04 || Accessory
|-
| $05 || Key item
|}

===Item ID Reference===
====Consumables ($00-$23)====
{| class="wikitable"
|-
! ID !! Name !! Effect
|-
| $00 || Candy || Restore 100 HP
|-
| $01 || Chocolate || Restore 250 HP
|-
| $02 || Royal Jam || Restore all HP
|-
| $03 || Faerie Walnut || Restore 50 MP
|-
| $04 || Medical Herb || Cure status
|-
| $05 || Cup of Wishes || Revive
|-
| $06 || Magic Rope || Return to entrance
|-
| $07 || Flammie Drum || Call Flammie
|}

====Weapons ($24-$4b)====
Each weapon type has 9 levels (levels 0-8):
{| class="wikitable"
|-
! ID Range !! Weapon Type
|-
| $24-$2c || Sword (Rusty → Mana Sword)
|-
| $2d-$35 || Axe
|-
| $36-$3e || Spear
|-
| $3f-$47 || Whip
|-
| $48-$50 || Bow
|-
| $51-$59 || Boomerang
|-
| $5a-$62 || Javelin
|-
| $63-$6b || Glove
|}

==Weapon Data==

===Weapon Stats Structure===
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 1 || Attack power
|-
| $01 || 1 || Hit rate bonus
|-
| $02 || 1 || Critical rate
|-
| $03 || 1 || Special effect
|-
| $04 || 1 || Charge speed
|-
| $05 || 1 || Required orbs
|}

===Weapon Level Requirements===
{| class="wikitable"
|-
! Level !! Orbs Required !! Charge Attacks
|-
| 0 || 0 || None
|-
| 1 || 1 || Power Attack 1
|-
| 2 || 2 || Power Attack 2
|-
| 3 || 3 || Power Attack 3
|-
| 4 || 4 || Power Attack 4
|-
| 5 || 5 || Power Attack 5
|-
| 6 || 6 || Power Attack 6
|-
| 7 || 7 || Power Attack 7
|-
| 8 || 8 || Power Attack 8
|}

==Magic Data==

===Magic Spell Structure===
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 1 || MP cost
|-
| $01 || 1 || Base power
|-
| $02 || 1 || Element
|-
| $03 || 1 || Target type
|-
| $04 || 1 || Animation ID
|-
| $05 || 1 || Flags
|}

===Element Values===
{| class="wikitable"
|-
! Value !! Element !! Spirit
|-
| $00 || None || —
|-
| $01 || Water || Undine
|-
| $02 || Earth || Gnome
|-
| $04 || Wind || Sylphid
|-
| $08 || Fire || Salamando
|-
| $10 || Moon || Luna
|-
| $20 || Dark || Shade
|-
| $40 || Light || Lumina
|-
| $80 || Mana/Wood || Dryad
|}

===Magic by Spirit===
====Undine (Water)====
{| class="wikitable"
|-
! Spell !! MP !! Character !! Effect
|-
| Freeze || 2 || Sprite || Ice damage
|-
| Acid Storm || 3 || Sprite || Water damage (area)
|-
| Energy Absorb || 2 || Sprite || Drain HP
|-
| Cure Water || 2 || Girl || Restore HP
|-
| Remedy || 1 || Girl || Cure status
|-
| Ice Saber || 2 || Girl || Enchant weapon
|}

====Gnome (Earth)====
{| class="wikitable"
|-
! Spell !! MP !! Character !! Effect
|-
| Gem Missile || 2 || Sprite || Earth damage
|-
| Earth Slide || 3 || Sprite || Earth damage (area)
|-
| Speed Down || 1 || Sprite || Slow enemy
|-
| Defender || 2 || Girl || Raise defense
|-
| Stone Saber || 4 || Girl || Enchant weapon
|-
| Speed Up || 3 || Girl || Raise speed
|}

==Map Data==

===Map Header Structure===
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 2 || Map width (tiles)
|-
| $02 || 2 || Map height (tiles)
|-
| $04 || 2 || Tileset ID
|-
| $06 || 2 || Palette ID
|-
| $08 || 1 || Music ID
|-
| $09 || 1 || Ambient sound ID
|-
| $0a || 2 || NPC pointer offset
|-
| $0c || 2 || Event pointer offset
|}

===Exit/Warp Structure===
Each exit entry is 4 bytes:
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 1 || Destination map ID
|-
| $01 || 1 || Destination X
|-
| $02 || 1 || Destination Y
|-
| $03 || 1 || Entrance flags
|}

===Entrance Flags===
{| class="wikitable"
|-
! Bit !! Description
|-
| 0-2 || Facing direction after warp
|-
| 3 || Fade type
|-
| 4-5 || Transition style
|-
| 6 || Play sound
|-
| 7 || Execute event
|}

==Event Data==

===Event Header===
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 2 || Event ID
|-
| $02 || 2 || Event data length
|-
| $04 || var || Event commands
|}

===Event Commands===
{| class="wikitable"
|-
! Command !! Length !! Description
|-
| $00 || 1 || End event
|-
| $01 xx || 2 || Wait xx frames
|-
| $02 xx yy || 3 || Jump to event xx yy
|-
| $10 xx || 2 || Dialogue box xx
|-
| $11 xx yy || 3 || Choice box
|-
| $20 xx yy || 3 || Move NPC
|-
| $30 xx || 2 || Play sound effect xx
|-
| $31 xx || 2 || Play music xx
|-
| $40 xx || 2 || Set flag xx
|-
| $41 xx || 2 || Clear flag xx
|-
| $50 xx yy || 3 || Give item xx, qty yy
|-
| $51 xx yy || 3 || Remove item
|-
| $60 xx yy zz || 4 || Teleport to map
|}

==Save Data==

===Save File Structure===
Total size: $800 bytes (2048) per slot
{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $00 || 2 || Checksum
|-
| $02 || 2 || Checksum complement
|-
| $04 || $200 || Hero data
|-
| $204 || $200 || Girl data
|-
| $404 || $200 || Sprite data
|-
| $604 || $80 || Inventory data
|-
| $684 || $40 || Weapon/Magic levels
|-
| $6c4 || $40 || Event flags
|-
| $704 || $fc || Misc game state
|}

===Checksum Calculation===
The checksum is a 16-bit sum of all save data bytes from $04 to $7ff.
The complement is $ffff minus the checksum.

==References==
* [[Secret of Mana/ROM Map]]
* [[Secret of Mana/RAM Map]]
* [https://datacrystal.tcrf.net/wiki/Secret_of_Mana_(SNES) Data Crystal]

[[Category:Data Structures]]
[[Category:Secret of Mana]]
