{{DISPLAYTITLE:Secret of Mana/ROM Map}}
This page documents the ROM layout for '''[[Secret of Mana]]''' (US version).

==Overview==
Secret of Mana uses HiROM mapping. The ROM is 2 MB (2,097,152 bytes) with no header.

===Address Conversion===
{| class="wikitable"
|-
! ROM Offset !! CPU Address (HiROM) !! Notes
|-
| $000000 || $c0:0000 || Bank $c0
|-
| $010000 || $c1:0000 || Bank $c1
|-
| $100000 || $d0:0000 || Bank $d0
|-
| $1f0000 || $df:0000 || Bank $df (end)
|}

==Bank Layout==
{| class="wikitable"
|-
! Banks !! ROM Offset !! Size !! Contents
|-
| $c0-$cf || $000000-$0fffff || 1 MB || Code and data
|-
| $d0-$df || $100000-$1fffff || 1 MB || Additional code/data
|}

==Code Sections==

===Reset and Interrupt Vectors===
{| class="wikitable"
|-
! Address !! Vector
|-
| $00fffc || Reset vector ($8004)
|-
| $00ffea || NMI vector
|-
| $00ffee || IRQ vector
|}

==Data Tables==

===Enemy Data===
{| class="wikitable"
|-
! ROM Offset !! CPU Address !! Description
|-
| $102655 || $d0:2655 || Enemy stats table (29 bytes/entry, verified)
|-
| $105116 || $d0:5116 || Enemy movement/AI data
|-
| $103a50 || $d0:3a50 || Enemy drop tables
|}

====Enemy Stats Structure (29 bytes)====
<pre>
Offset  Size  Description
------  ----  -----------
$00     1     HP (byte value, Rabite = 20)
$01     1     Unknown (often duplicates HP)
$02-$07 6     Various flags/type data
$08-$09 2     Combat attributes
$0a     1     Attack modifier
$0b     1     Defense modifier
$0c-$0d 2     Additional combat values
$0e-$11 4     Reserved (typically 0xfc 0x7f 0x00 0x00)
$12-$13 2     Unknown
$14-$15 2     Experience (encoded)
$16-$1c 7     Gold and other values
</pre>

'''Known Enemy HP Values (verified):'''
* Enemy 0 (Rabite): HP = 20
* Enemy 1 (Buzz Bee): HP = 30
* Enemy 2: HP = 32
* Enemy 15 (Lullabud): HP = 55

===Character Data===
{| class="wikitable"
|-
! ROM Offset !! CPU Address !! Description
|-
| $104213 || $d0:4213 || Hero level 1 Strength
|-
| $104214 || $d0:4214 || Hero level 1 Agility
|-
| $104215 || $d0:4215 || Hero level 1 Constitution
|-
| $104216 || $d0:4216 || Hero level 1 Intelligence
|-
| $104217 || $d0:4217 || Hero level 1 Wisdom
|}

Level 2 stats are at offset +$28 (40 bytes) from level 1.

===Item Data===
{| class="wikitable"
|-
! ROM Offset !! CPU Address !! Description
|-
| $18fb9c || $d8:fb9c || Item prices (first = Candy)
|}

==Map Data==

===Exit/Warp Data===
Located at $083000 (file offset), 4 bytes per entry:
{| class="wikitable"
|-
! Byte !! Description
|-
| 0 || Destination map ID
|-
| 1 || Destination X coordinate
|-
| 2 || Destination Y coordinate
|-
| 3 || Entrance style/flags
|}

===Potos Village===
{| class="wikitable"
|-
! ROM Offset !! Description
|-
| $0a933f || Music byte
|-
| $0a9340 || Fade out time/echo effect
|-
| $0a9341 || Music volume
|-
| $0a9342 || Unknown
|-
| $0a9343 || Event after music fade
|-
| $0a9344 || Event byte on enter
|}

==Audio Data==

===Music Pointers===
{| class="wikitable"
|-
! ROM Offset !! Description
|-
| $033d39 || SPC music pointers
|-
| $033f22 || Sample indexes
|}

===BRR Sample Data===
Samples start around $c347c3 (varies by sample).

===SPC Sequence Data===
Music sequences start around $c4d33d.

====Known Tracks====
{| class="wikitable"
|-
! Address !! Track Name
|-
| $c4d33d || Into the Thick of It
|-
| $c50f43 || Flight into the Unknown
|-
| $c5963f || Star of Darkness
|-
| $c5fc56 || Prophecy
|-
| $c4f078 || Danger
|-
| $c4fde4 || Far Thunder
|-
| $c506b8 || The Wind Never Ceases
|}

====SPC Sequence Commands====
{| class="wikitable"
|-
! Command !! Description
|-
| $00-$0d || Play note C
|-
| $0e-$1b || Play note C#
|-
| $1c-$29 || Play note D
|-
| ... || (continues for all notes)
|-
| $c0-$ce || Rest
|-
| $d2 xx || Set volume to xx
|-
| $d4 xx || Pan ($00=right, $64=center, $ff=left)
|-
| $d7 ss tt dd || Vibrato (speed, time, depth)
|-
| $e0 || Vibrato off
|-
| $e4 xx || Change pitch
|-
| $e5 xx || Set note length
|-
| $ea xx || Change instrument
|-
| $f2 || End channel
|-
| $f3 xx || Set tempo
|-
| $f5 xx || Set reverb
|-
| $f8 xx || Set global volume
|-
| $ff || End sequence
|}

==Graphics Data==
{{stub}}

==Text Data==
See [[Secret of Mana/Text Table]] for character encoding.

==Compression==
Map data uses a partially documented compression format.

==References==
* [https://datacrystal.tcrf.net/wiki/Secret_of_Mana_(SNES)/ROM_map Data Crystal ROM Map]
* [https://datacrystal.tcrf.net/wiki/Secret_Of_Mana_Bank_Disassemblies Bank Disassemblies]

[[Category:ROM Maps]]
[[Category:Secret of Mana]]
