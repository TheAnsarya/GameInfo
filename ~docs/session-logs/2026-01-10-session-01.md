# Session Log: 2026-01-10 Session 01

## Date

2026-01-10

## Focus Areas

- Dragon Warrior IV EXP formula implementation in DW4Lib
- Dark Repos wikitext documentation
- Markdown formatting standardization across all repos

## Completed Work

### DW4Lib - ExperienceCalculator (PAUSED - Low Priority)

Implemented the reverse-engineered EXP formula in C#:

- Created `DW4Lib\DataStructures\ExperienceCalculator.cs`
  - `ComputeExp(int slot, int level)` - Main computation
  - `ComputeExp(string name, int level)` - By character name
  - `GenerateTable(int slot)` - Full table for one character
  - `GenerateAllTables()` - All 8 characters
- Created `DW4Lib.Tests\ExperienceCalculatorTests.cs` - 34 passing tests
- Verified against known game values (Alena, Taloon, Hero)

Formula: `delta = (prev_delta * rate) >> 4`

### Dark Repos Wikitext

Created comprehensive wiki documentation:

- `docs/wikitext/Experience-Formula.wikitext` - Complete EXP algorithm
- `docs/wikitext/Stat-Growth-Formula.wikitext` - Stat calculation system
- Updated `docs/wikitext/ROM-Map.wikitext`:
  - Added Bank 8 Details (stat growth code $80D5-$81E8)
  - Added Bank 18 Details (EXP code $9FB9-$A037)
  - Cross-references to formula pages

### Markdown Formatting Standardization

Updated configuration across all repos:

- `.editorconfig` - Added markdownlint rules:
  - MD010: false (allow hard tabs)
  - MD032: true (blanks around lists)
  - MD040: true (fenced code language)
  - MD041: true (first-line heading)
  - MD047: true (single trailing newline)

- `.markdownlint.json` - Created/updated in:
  - GameInfo
  - dragon-warrior-4-info
  - logsmall
  - ffmq-info
  - dragon-warrior-info

## Commits

| Repository | Commit | Description |
|------------|--------|-------------|
| logsmall | aa018e5 | feat(DW4Lib): Add ExperienceCalculator |
| dragon-warrior-4-info | abd7c44 | docs: EXP formula and tools |
| dragon-warrior-4-info | b455f33 | docs: Stat growth formula wikitext |
| dragon-warrior-4-info | 886fa89 | docs: Update ROM map with Bank 8/18 |

## Priority Adjustments

**Set to LOW PRIORITY:**

- DW4 EXP formula refinement
- DW4 stat growth extraction
- DW4-specific deep dives

**Reason:** Need wide results across all projects, not deep dives on single issues.

## Next Steps

1. ~~Create GitHub issue for markdown formatting~~ (pending)
2. Fix/format all markdown files in workspace
3. Commit formatting fixes linked to issues
4. Update roadmap and plans
5. Continue with broad project work across all repos

## Files Changed

- `DW4Lib/DataStructures/ExperienceCalculator.cs` (new)
- `DW4Lib.Tests/ExperienceCalculatorTests.cs` (new)
- `docs/wikitext/Experience-Formula.wikitext` (new)
- `docs/wikitext/Stat-Growth-Formula.wikitext` (new)
- `docs/wikitext/ROM-Map.wikitext` (updated)
- `.editorconfig` (5 repos updated)
- `.markdownlint.json` (5 repos created/updated)

## Notes

- EXP formula verified: matches L2-L5 and L10 for Alena, Taloon, Hero
- Some online sources (woodus.com) have incorrect L6-L9 values
- Bank 8 stat growth uses different formula than Bank 18 EXP
