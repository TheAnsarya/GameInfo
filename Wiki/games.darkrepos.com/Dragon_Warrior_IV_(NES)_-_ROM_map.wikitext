{{rommap}}
{{game|Dragon Warrior IV (NES)}}

=Dragon Warrior IV (NES) ROM Map=

This ROM map documents the PRG ROM layout of Dragon Warrior IV (US version), based on disassembly analysis from the [https://github.com/TheAnsarya/dragon-warrior-4-info dragon-warrior-4-info] project.

==ROM Information==

{| class="wikitable"
|-
! Property !! Value
|-
| Title || Dragon Warrior IV
|-
| Region || US
|-
| Size || 512KB PRG + 256KB CHR
|-
| Mapper || MMC5 (5)
|-
| Banks || 32 PRG banks (16KB each)
|-
| Header || 16 bytes (iNES)
|-
| CRC32 || <code>A5E6BAD5</code>
|}

==Memory Layout==

The MMC5 mapper provides flexible bank switching:

{| class="wikitable"
|-
! Address Range !! Size !! Description
|-
| $8000-$9FFF || 8KB || Switchable PRG bank (mode dependent)
|-
| $A000-$BFFF || 8KB || Switchable PRG bank (mode dependent)
|-
| $C000-$DFFF || 8KB || Switchable PRG bank (mode dependent)
|-
| $E000-$FFFF || 8KB || Fixed to last bank (Bank 31)
|}

==Bank Structure==

Dragon Warrior IV uses 32 banks of 16KB PRG ROM.

{| class="wikitable sortable"
|-
! Bank !! File Offset !! CPU Address !! Description !! Subroutines
|-
| Bank 00 || $00010-$04010 || $8000-$BFFF || Map/world data || 22
|-
| Bank 01 || $04010-$08010 || $8000-$BFFF || Map/world data || 17
|-
| Bank 02 || $08010-$0C010 || $8000-$BFFF || Map/world data || 16
|-
| Bank 03 || $0C010-$10010 || $8000-$BFFF || Map/world data || 14
|-
| Bank 04 || $10010-$14010 || $8000-$BFFF || Graphics data || 22
|-
| Bank 05 || $14010-$18010 || $8000-$BFFF || Graphics data || 12
|-
| Bank 06 || $18010-$1C010 || $8000-$BFFF || Monster table, sprites || 57
|-
| Bank 07 || $1C010-$20010 || $8000-$BFFF || Monster data || 75
|-
| Bank 08 || $20010-$24010 || $8000-$BFFF || Monster data || 76
|-
| Bank 09 || $24010-$28010 || $8000-$BFFF || Audio/music || 48
|-
| Bank 10 || $28010-$2C010 || $8000-$BFFF || Audio/music || 46
|-
| Bank 11 || $2C010-$30010 || $8000-$BFFF || Audio/music || 37
|-
| Bank 12 || $30010-$34010 || $8000-$BFFF || Text/dialog || 50
|-
| Bank 13 || $34010-$38010 || $8000-$BFFF || Text/dialog || 39
|-
| Bank 14 || $38010-$3C010 || $8000-$BFFF || Text/dialog || 47
|-
| Bank 15 || $3C010-$40010 || $8000-$BFFF || Battle system || 282
|-
| Bank 16 || $40010-$44010 || $8000-$BFFF || Battle system || 203
|-
| Bank 17 || $44010-$48010 || $8000-$BFFF || Menu system || 236
|-
| Bank 18 || $48010-$4C010 || $8000-$BFFF || Shop/item system || 206
|-
| Bank 19 || $4C010-$50010 || $8000-$BFFF || '''Battle AI/Tactics''' || 284
|-
| Bank 20 || $50010-$54010 || $8000-$BFFF || World map system || 194
|-
| Bank 21 || $54010-$58010 || $8000-$BFFF || NPC/event system || 185
|-
| Bank 22 || $58010-$5C010 || $8000-$BFFF || Event scripting || 232
|-
| Bank 23 || $5C010-$60010 || $8000-$BFFF || Event scripting || 203
|-
| Bank 24 || $60010-$64010 || $8000-$BFFF || Save system || 117
|-
| Bank 25 || $64010-$68010 || $8000-$BFFF || Compression || 29
|-
| Bank 26 || $68010-$6C010 || $8000-$BFFF || Data tables || 19
|-
| Bank 27 || $6C010-$70010 || $8000-$BFFF || Experience/level system || 207
|-
| Bank 28 || $70010-$74010 || $8000-$BFFF || Character stats || 123
|-
| Bank 29 || $74010-$78010 || $8000-$BFFF || Equipment system || 207
|-
| Bank 30 || $78010-$7C010 || $8000-$BFFF || Core routines || 293
|-
| Bank 31 || $7C010-$80010 || $C000-$FFFF || '''Fixed bank''' (always loaded) || 239
|}

==Bank Details==

===Bank 06 - Monster Table===

Contains the main monster definition table starting at $18010.

{| class="wikitable"
|-
! Offset !! Description
|-
| $18010 || Monster sprite data
|-
| $18800 || Monster stat table
|-
| $19000 || Monster attack patterns
|}

===Bank 19 - Battle AI System===

The party AI and tactics system resides in Bank 19. This is one of the most complex banks in the game.

{| class="wikitable"
|-
! Offset !! Description
|-
| $4C010 || AI decision tree entry
|-
| $4C100 || Tactic handlers
|-
| $4C400 || Spell selection logic
|-
| $4C800 || Target selection
|}

===Bank 27 - Experience System===

Contains experience tables and level-up logic.

{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $6C010 || ~$200 || Experience threshold tables (per character)
|-
| $6C210 || ~$100 || Stat growth tables
|-
| $6C310 || ~$100 || Spell learning tables
|}

===Bank 31 - Fixed Bank===

Always mapped to $C000-$FFFF. Contains:
* Interrupt vectors (NMI, IRQ, Reset)
* Core game loop
* Bank switching routines
* Common subroutines called from all banks

{| class="wikitable"
|-
! Address !! Description
|-
| $FFFA || NMI Vector
|-
| $FFFC || Reset Vector
|-
| $FFFE || IRQ Vector
|}

==Data Tables==

===Monster Data (Bank 06-08)===

{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $18800 || 8 bytes/entry || Monster base stats
|-
| $19000 || 4 bytes/entry || Monster attack patterns
|-
| $19400 || 2 bytes/entry || Monster sprite pointers
|}

===Item Data (Bank 26)===

{| class="wikitable"
|-
! Offset !! Size !! Description
|-
| $68100 || 4 bytes/entry || Weapon stats
|-
| $68200 || 4 bytes/entry || Armor stats
|-
| $68300 || 2 bytes/entry || Item effects
|}

===Text Data (Banks 12-14)===

Compressed text using a custom DTE (Dual Tile Encoding) scheme.

{| class="wikitable"
|-
! Bank !! Content
|-
| Bank 12 || NPC dialog, town names
|-
| Bank 13 || Battle messages, item names
|-
| Bank 14 || Story text, chapter intros
|}

==See Also==

* [[Dragon Warrior IV (NES)/RAM map|RAM Map]]
* [[Dragon Warrior IV (NES)/Values|Values Tables]]
* [[Dragon Warrior IV (NES)/TBL|Text Table]]

[[Category:ROM Maps]]
[[Category:Dragon Warrior IV (NES)]]
[[Category:NES Games]]
