{{Back|Dragon Warrior IV (NES)}}

= Dragon Warrior IV (NES) - Spells =

This page documents the spell and magic system in Dragon Warrior IV.

'''Data Status:''' Spell effect table verified from Bank 19 ($b80b). Power tables at $bb3f, $bb49.

== Overview ==

Dragon Warrior IV features a comprehensive spell system with healing, offensive, status, and utility spells. The game uses an action code system where each spell, attack, and ability is assigned a unique code that determines its behavior through lookup tables in Bank 19.

The spell system distinguishes between:
* '''Direct damage spells''' - Deal elemental damage based on power tables and enemy resistances
* '''Status spells''' - Apply conditions like sleep, paralysis, or instant death with success rates
* '''Healing spells''' - Restore HP using base values modified by caster stats
* '''Utility spells''' - Provide non-combat benefits like dungeon escape or repelling encounters

== ROM Data Locations ==

All spell data is stored in Bank 19 (ROM file offset $4c010-$50010):

{| class="wikitable"
! Data Type !! ROM Address !! Bank 19 Offset !! Size !! Description
|-
| Effect table || $4f80b || $b80b || ~$60 || Maps action codes to effect types
|-
| Power table 1 || $4fb3f || $bb3f || 9 bytes || Base power values by index
|-
| Power table 2 || $4fb49 || $bb49 || 7 bytes || Attribute modifiers
|-
| Hit check routine || $4d135 || $9135 || ~$200 || Determines spell success/failure
|}

== Action Code Ranges ==

Action codes are single-byte values that identify every possible battle action. The game categorizes these into ranges that determine which handler routines process them.

Source: Bank 19 hit check routine at $9135

{| class="wikitable"
! Range !! Type !! Description
|-
| $00-$12 || Physical || Regular attacks, defend, flee
|-
| $13-$1b || Healing || Heal, Healmore, Vivify, etc.
|-
| $1c-$28 || Offensive || Blaze, Bang, Zap, elemental spells
|-
| $29-$32 || Status || Sleep, StopSpell, Surround
|-
| $33-$42 || Buff/Utility || Bounce, Bikill, Return, etc.
|-
| $43+ || Special || Monster abilities, AI actions
|}

== Spell Effect Table ($b80b) ==

The effect table at Bank 19 address $b80b contains one byte per action code. This byte encodes both the effect category and a power/parameter value using a packed format.

{| class="wikitable"
! Bits !! Description
|-
| 7-4 (upper nibble) || Effect category/type - determines which effect handler to use
|-
| 3-0 (lower nibble) || Power level or sub-parameter - modifies the effect strength
|}

=== Common Effect Bytes ===

The following effect byte values appear frequently in the spell table:

{| class="wikitable"
! Value Range !! Hex !! Description !! Typical Spells
|-
| $e0-$e5 || e0-e5 || Healing spells (different power levels) || Heal, Healmore, Healall
|-
| $f2 || f2 || Standard offensive/status formula || Most damage and status spells
|-
| $67-$72 || 67-72 || Status/buff effects || Increase, Bikill, buff spells
|-
| $c7 || c7 || Resurrection with chance || Vivify (50% success)
|-
| $6b || 6b || Full resurrection || Revive (100% success)
|}

== Healing Spells ==

Healing spells restore HP to party members. The amount healed depends on the spell's base power and may be modified by caster intelligence or level.

{| class="wikitable sortable"
! Code !! Name !! Effect Byte !! MP Cost !! Description
|-
| $13 || Heal || $68 || 2 || Restore minor HP (~30-40)
|-
| $14 || Healmore || $68 || 5 || Restore moderate HP (~80-100)
|-
| $15 || Healall || $ee || 7 || Restore all HP to one ally
|-
| $16 || Healus || $e9 || 18 || Restore HP to all allies (~100)
|-
| $17 || Healusall || $67 || 36 || Restore all HP to all allies
|-
| $18 || Vivify || $c7 || 10 || 50% chance to revive ally with partial HP
|-
| $19 || Revive || $6b || 20 || Fully revive ally with full HP
|-
| $1a || Antidote || $a6 || 2 || Cure poison status
|-
| $1b || Numboff || $4c || 2 || Cure paralysis status
|}

== Offensive Spells ==

Offensive spells deal elemental damage to enemies. Damage is calculated using the spell's power index, caster stats, and target's elemental resistance.

{| class="wikitable sortable"
! Code !! Name !! Effect Byte !! Element !! Target !! Description
|-
| $1c || Blaze || $ea || Fire || Single || Base fire damage spell
|-
| $1d || Blazemore || $f2 || Fire || Single || Stronger single target fire
|-
| $1e || Blazemost || $f2 || Fire || Single || Strongest single target fire
|-
| $1f || Firebane || $cd || Fire || Group || Area fire damage
|-
| $20 || Firevolt || $cd || Fire || Group || Stronger area fire
|-
| $21 || Bang || $f2 || Explosion || Group || Base explosion damage
|-
| $22 || Boom || $f2 || Explosion || Group || Stronger explosion
|-
| $23 || Explodet || $f2 || Explosion || Group || Strongest explosion
|-
| $24 || Icebolt || $f2 || Ice || Single || Ice damage spell
|-
| $25 || Snowblast || $f2 || Ice || Group || Area ice damage
|-
| $26 || Zap || $f2 || Lightning || Group || Lightning damage
|-
| $27 || Thordain || $f2 || Lightning || Group || Ultimate lightning (requires 4 casters)
|-
| $28 || Defeat || $f2 || Instant || Single || Instant death attempt
|}

== Status Spells ==

Status spells attempt to inflict conditions on enemies. Success rate depends on the target's resistance and may be modified by level difference between caster and target.

{| class="wikitable sortable"
! Code !! Name !! Effect Byte !! Target !! Description
|-
| $29 || Beat || $f2 || Group || Attempt instant death on enemy group
|-
| $2a || Bedragon || $f2 || Self || Transform into dragon form (Mara special)
|-
| $2b || Limbo || $f2 || Single || Banish enemy from battle permanently
|-
| $2c || Sleep || $f2 || Single || Put one enemy to sleep (skips turns)
|-
| $2d || Sleepmore || $f2 || Group || Put enemy group to sleep
|-
| $2e || StopSpell || $f2 || Single || Seal enemy's magic for battle duration
|-
| $2f || Surround || $f2 || Group || Reduce enemy accuracy (causes misses)
|-
| $30 || RobMagic || $f2 || Single || Drain MP from enemy to caster
|-
| $31 || Ironize || $f2 || Party || Party becomes invincible but cannot act
|-
| $32 || Transform || $f2 || Self || Copy enemy's appearance and stats
|}

== Buff/Utility Spells ==

Buff spells enhance party capabilities, while utility spells provide non-combat benefits. Most buffs last for the duration of battle.

{| class="wikitable sortable"
! Code !! Name !! Effect Byte !! Target !! Description
|-
| $33 || Bounce || $f2 || Single || Reflect spells back at caster
|-
| $34 || Increase || $f2 || Party || Raise defense for all allies
|-
| $35 || Bikill || $f2 || Single || Double attack power for one ally
|-
| $36 || Sap || $f2 || Single || Lower one enemy's defense
|-
| $37 || Defense || $f2 || Single || Raise defense for one ally
|-
| $38 || SpeedUp || $f2 || Party || Raise agility for all allies
|-
| $39 || SlowDown || $f2 || Single || Lower enemy agility
|-
| $3a || Outside || $f2 || Party || Instantly exit current dungeon
|-
| $3b || Return || $f2 || Party || Warp to previously visited town
|-
| $3c || X-Ray || $f2 || -- || Reveal hidden treasure and traps
|-
| $3d || Stepguard || $f2 || Party || Prevent damage from poison/lava tiles
|-
| $3e || Repel || $f2 || Party || Prevent weak random encounters
|-
| $3f || Radiant || $f2 || Party || Illuminate dark dungeon areas
|-
| $40 || Day-Night || $f2 || -- || Toggle between day and night
|-
| $41 || Chance || $f2 || Varies || Random effect (unpredictable)
|-
| $42 || Transform || $f2 || Self || Change caster's appearance
|}

== Spell Power Tables ==

These tables at fixed ROM addresses control spell damage and effect strength. The game indexes into these tables based on the spell's power category.

=== Power Values ($bb3f) ===

This 9-entry table provides base power multipliers indexed by the spell's internal power index (values 0-8). Located at Bank 19 address $bb3f.

{| class="wikitable"
! Index !! Value (Dec) !! Value (Hex) !! Usage
|-
| 0 || 85 || $55 || Standard power - most basic spells
|-
| 1 || 100 || $64 || High power - intermediate spells
|-
| 2 || 100 || $64 || High power (duplicate)
|-
| 3 || 192 || $c0 || Very high - advanced spells
|-
| 4 || 192 || $c0 || Very high (duplicate)
|-
| 5 || 0 || $00 || No damage - utility/status spells
|-
| 6 || 0 || $00 || No damage
|-
| 7 || 0 || $00 || No damage
|-
| 8 || 85 || $55 || Standard power (wraparound)
|}

=== Attribute Values ($bb49) ===

This 7-entry table modifies spell effects based on elemental or spell type attributes. Located at Bank 19 address $bb49.

{| class="wikitable"
! Index !! Value (Dec) !! Value (Hex) !! Probable Use
|-
| 0 || 85 || $55 || Fire element base
|-
| 1 || 100 || $64 || Ice element base
|-
| 2 || 100 || $64 || Lightning element base
|-
| 3 || 32 || $20 || Explosion element (lower base, hits group)
|-
| 4 || 32 || $20 || Instant death (low success rate)
|-
| 5 || 160 || $a0 || Healing multiplier
|-
| 6 || 160 || $a0 || Buff effect strength
|}

== Character Spell Learning ==

Each playable character has a predetermined spell list learned at specific levels. Non-magic characters (Taloon, Ragnar, Alena) have no spell capability and instead rely on physical attacks and special abilities.

{| class="wikitable"
! Character !! Spell Focus !! Key Spells !! Notes
|-
| Hero || Balanced || Healall, Zap, Return || Learns both healing and offensive; most versatile
|-
| Cristo || Healing/Support || Healus, Revive, Increase || Primary healer, defensive buffs
|-
| Nara || Fortune/Status || Vivify, Outside, Beat || Status effects, limited healing
|-
| Mara || Offensive || Firevolt, Blazemost, Bedragon || Pure damage dealer, fire specialist
|-
| Brey || Offensive/Status || Icebolt, Snowblast, Sleepmore || Ice spells, crowd control
|-
| Taloon || None || -- || Luck-based abilities only, no MP
|-
| Ragnar || None || -- || Fighter class, no magic capability
|-
| Alena || None || -- || Martial artist, no magic capability
|}

== See Also ==

* [[Dragon Warrior IV (NES)/Characters|Characters]] - Spell learners by character
* [[Dragon Warrior IV (NES)/Battle System|Battle System]] - Combat mechanics
* [[Dragon Warrior IV (NES)/Enemies|Enemies]] - Enemy spell usage
* [[Dragon Warrior IV (NES)/Items|Items]] - Equipment with spell effects
* [[Dragon Warrior IV (NES)/ROM Map|ROM Map]] - Bank 19 data locations
* [[Dragon Warrior IV (NES)|Main Page]]

[[Category:Magic System]]
[[Category:NES]]
[[Category:Dragon Warrior IV]]
